# Task List

This is a task list generated by Copilot based on a manually composed specification.

## Task List

### A. Core Architecture (LLM + Messaging)
- [ ] Implement trusted/untrusted/external message ingestion pipeline (classification per spec).
- [ ] Freeze & load immutable system prompt enforcing least‑privilege and non‑override rules.
- [ ] Implement multi‑party chat handler for Telegram/WhatsApp “arena”.
- [ ] Implement owner‑only DM channel separated from arena channel.

### B. Guardrails Layer L1 (Pre‑LLM & Post‑LLM)
- [ ] Implement Pre‑LLM guard (pattern filters + Spotlighting‑style isolation of untrusted content).
- [ ] Implement canonical safety checks (sanitize/encode suspicious inputs).
- [ ] Add Post‑LLM guard to validate the model’s suggested intent before tool invocation.
- [ ] Enforce refusal behavior when malicious intent is detected.

### C. Guardrails Layer L2 (Off‑chain Specification Check / Policy Engine)
- [ ] Create allowlist for DEX routers (Ethereum MVP).
- [ ] Implement slippage constraint check (<= 10%).
- [ ] Implement daily value cap check.
- [ ] Implement unlimited‑allowance detection & block.
- [ ] Implement deterministic error codes + explanations for blocked actions.
- [ ] Create structured spec‑checking module to validate DEX quotes (1inch, etc.).

### D. Guardrails Layer L3 (On‑chain Contract Limitations)
- [ ] Integrate multi‑sig or constrained‑contract guard preventing unauthorized/excessive transactions.
- [ ] Implement contract‑level enforcement hooks (reject non‑allowlisted targets).

### E. Market & DEX Integration
- [ ] Implement CoinGecko market snapshot fetcher.
- [ ] Implement 1inch (or other DEX) quote fetcher.
- [ ] Validate fetched quotes as external context (tagging + separation).
- [ ] Ensure market + quote pipeline latency < 2 seconds (per constraint).

### F. HITL (Human‑in‑the‑Loop) Execution
- [ ] Implement HITL pause node before any transaction‑generating action.
- [ ] Implement owner confirmation command ("confirm") to resume execution.
- [ ] Ensure agent cannot proceed to signing without HITL confirmation.

### G. Wallet / Transaction Layer
- [ ] Integrate MetaMask or multi‑sig wallet signer (server never touches private keys).
- [ ] Implement transaction preparation + forwarding pipeline to wallet.
- [ ] Record and return TX hash after confirmed execution.

### H. Security Evaluation Framework
- [ ] Build 100‑case red‑team suite (25 direct, 25 indirect/encoded, 25 tool poisoning, 25 memory poisoning).
- [ ] Implement ASR/TTR/FP metric logger for each evaluation run.
- [ ] Add checkpointing & replay mechanism for post‑mortem analysis.

### I. Performance & Deployment
- [ ] Verify end‑to‑end agent response < 3 seconds under nominal network conditions.
